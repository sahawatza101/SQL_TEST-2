--58045848 SAHAWAT SUPJAROENKOOL SEC.001

USE master
CREATE DATABASE JSHOP;
--1.7. SQL statements for table creations
USE JSHOP;    

CREATE TABLE CUSTOMER
(
	C_ID		VARCHAR(10)			PRIMARY KEY,
	C_NAME		VARCHAR(100)		NOT NULL,
	BYEAR		INT					NOT NULL,
	AGE		    AS (YEAR(GETDATE())-BYEAR),
	SEX			VARCHAR(2)			NULL DEFAULT 'M',
	TELL        VARCHAR(10)			NULL DEFAULT '000-000-0000'
);

CREATE TABLE PRODUCT
(
	P_ID		VARCHAR(10)		PRIMARY KEY,
	P_NAME		VARCHAR(50)		NOT NULL ,
	PRICE		VARCHAR(5)		NOT NULL,
	TYP			VARCHAR(50)		NOT NULL,
	STOCK		VARCHAR(10)		NULL DEFAULT '12'
);

CREATE TABLE ORDERS
(
	O_ID		VARCHAR(10)		NOT NULL        PRIMARY KEY,
	C_ID        VARCHAR(10)		NOT NULL		FOREIGN KEY(C_ID) REFERENCES CUSTOMER(C_ID),
	P_ID		VARCHAR(10)		NOT NUll		FOREIGN KEY(P_ID) REFERENCES PRODUCT(P_ID),
	ORDERDATE		DATE	    DEFAULT GETDATE(),
	TOTAL		INT				NOT NULL    --จำนวนสินค้า
);

CREATE TABLE SHIPMENTS
(
	S_ID		VARCHAR(10)		NOT NULL    PRIMARY KEY,
	O_ID        VARCHAR(10)		NOT NULL	FOREIGN KEY(O_ID) REFERENCES ORDERS(O_ID),
	LOCA		VARCHAR(50)		NULL		DEFAULT 'BKK',
	ORDERDATE		DATE			        DEFAULT GETDATE(),
	DATESHIP	AS (DATEADD(DAY,7,ORDERDATE))
);

CREATE TABLE ORDERDETAILS
(
	OD_ID		VARCHAR(10)         NOT NULL    PRIMARY KEY,
	C_ID        VARCHAR(10)			FOREIGN KEY(C_ID) REFERENCES CUSTOMER(C_ID),
	C_NAME		VARCHAR(100)	    FOREIGN KEY(C_ID) REFERENCES CUSTOMER(C_ID),
	P_ID		VARCHAR(10)			FOREIGN KEY(P_ID) REFERENCES PRODUCT(P_ID),
	O_ID        VARCHAR(10)			FOREIGN KEY(O_ID) REFERENCES ORDERS(O_ID),
);

INSERT INTO CUSTOMER(C_ID,C_NAME,BYEAR,SEX,TELL)
VALUES('001','NANA',1998,'F','0855555555');
INSERT INTO CUSTOMER(C_ID,C_NAME,BYEAR,SEX,TELL)
VALUES('002','NANI',1989,'M','0805690558');
INSERT INTO CUSTOMER(C_ID,C_NAME,BYEAR,SEX,TELL)
VALUES('003','JACK',1994,'M','0655021689');
INSERT INTO CUSTOMER(C_ID,C_NAME,BYEAR,SEX,TELL)
VALUES('004','ADUM',1996,'M','0659565689');
INSERT INTO CUSTOMER(C_ID,C_NAME,BYEAR,SEX,TELL)
VALUES('005','BELL',2000,'F','029485569');

SELECT * FROM CUSTOMER
-------------------------------
	
INSERT INTO PRODUCT(P_ID,P_NAME,PRICE,TYP,STOCK	)
VALUES('101','LEO',50,'BEER','1');
INSERT INTO PRODUCT(P_ID,P_NAME,PRICE,TYP,STOCK	)
VALUES('102','U',50,'BEER','1');
INSERT INTO PRODUCT(P_ID,P_NAME,PRICE,TYP,STOCK	)
VALUES('103','WATER',7,'WATER','1');
INSERT INTO PRODUCT(P_ID,P_NAME,PRICE,TYP,STOCK	)
VALUES('104','ICHITAN',20,'WATER','1');
INSERT INTO PRODUCT(P_ID,P_NAME,PRICE,TYP,STOCK	)
VALUES('105','M150',10,'ENERGY DRINK','1');

SELECT * FROM PRODUCT
-----------------------------------------------
	
INSERT INTO ORDERS(O_ID,C_ID,P_ID,ORDERDATE,TOTAL)--ด-ว-ป
VALUES('O1','001',101,'1-3-2019','3');
INSERT INTO ORDERS(O_ID,C_ID,P_ID,ORDERDATE,TOTAL)
VALUES('O2','002',105,'5-16-2019','10');
INSERT INTO ORDERS(O_ID,C_ID,P_ID,ORDERDATE,TOTAL)
VALUES('O3','003',101,'11-23-2019','2');
INSERT INTO ORDERS(O_ID,C_ID,P_ID,ORDERDATE,TOTAL)
VALUES('O4','005',105,'9-30-2015','3');
INSERT INTO ORDERS(O_ID,C_ID,P_ID,ORDERDATE,TOTAL)
VALUES('O5','004',104,'12-31-2009','8');

SELECT * FROM ORDERS
------------------------------------------------------

INSERT INTO SHIPMENTS(S_ID,O_ID,LOCA,ORDERDATE)
VALUES('S1','O5','BKKs','12-31-2009');
INSERT INTO SHIPMENTS(S_ID,O_ID,LOCA,ORDERDATE)
VALUES('S2','O4','PATTAYA','9-30-2015');
INSERT INTO SHIPMENTS(S_ID,O_ID,LOCA,ORDERDATE)
VALUES('S3','O3','NAN','11-23-2019');
INSERT INTO SHIPMENTS(S_ID,O_ID,LOCA,ORDERDATE)
VALUES('S4','O2','BKKs','5-16-2019');
INSERT INTO SHIPMENTS(S_ID,O_ID,ORDERDATE)
VALUES('S5','O1','1-3-2019');

SELECT * FROM SHIPMENTS
------------------------------------------------------

INSERT INTO ORDERDETAILS(OD_ID,C_ID,C_NAME,P_ID,O_ID)
VALUES('OD1','001','NANA','101','O1');
INSERT INTO ORDERDETAILS(OD_ID,C_ID,C_NAME,P_ID,O_ID)
VALUES('OD2','002','NANI','102','O2');
INSERT INTO ORDERDETAILS(OD_ID,C_ID,C_NAME,P_ID,O_ID)
VALUES('OD3','003','JACK','103','O3');
INSERT INTO ORDERDETAILS(OD_ID,C_ID,C_NAME,P_ID,O_ID)
VALUES('OD4','004','ADUM','104','O4');
INSERT INTO ORDERDETAILS(OD_ID,C_ID,C_NAME,P_ID,O_ID)
VALUES('OD5','005','BELL','105','O5');

SELECT * FROM CUSTOMER
SELECT * FROM PRODUCT 
SELECT * FROM ORDERS
SELECT * FROM SHIPMENTS
SELECT * FROM ORDERDETAILS
-------------------------------------------------------------


-- 58045848 Sahwat Supjaroenkool	Sec.001

USE master;
CREATE DATABASE QUIZLAB;
USE QUIZLAB;

-- 1.สร้างตาราง STUDENT โดยมีโครงสร้างขอ้มูลดงัน้ี
--ID VARCHAR(4)
--NAME VARCHAR(25)
--GENDER VARCHAR(1)
--ขอ้กา หนดคุณสมบตัิของขอ้มูลมีดงัน้ี
--ID เป็ น PIMARY KEY
--GENDER กา หนดใหใ้ส่ไดเ้ฉพาะ'F' หรือ 'M' เท่าน้นั

CREATE TABLE STUDENT
(
	ID			VARCHAR(4)			      PRIMARY KEY,
	NAME		VARCHAR(25)		          NOT NULL,
	GENDER		VARCHAR(1)				  CHECK(GENDER IN ('F', 'M' ))
);		

--2.สร้างตาราง SUBJECT โดยมีโครงสร้างขอ้มูลดงัน้ี
--SUB_ID VARCHAR(4)
--SUB_NAME VARCHAR(25)
--ขอ้กา หนดคุณสมบตัิของขอ้มูลมีดงัน้ี
---SUB_ID เป็ น PIMARY KEY
--SUB_NAME มีคุณสมบัติเป็ น UNIQUE
CREATE TABLE SUBJECTS
( 
	SUB_ID		VARCHAR(4)			      PRIMARY KEY,
	SUB_NAME	VARCHAR(25)			      NOT NULL UNIQUE,	
);		

---3. ให้สร้างตาราง LEARNING โดยมีโครงสร้างขอ้มูลดงัน้ี
--ID VARCHAR(4)
--SUB_ID VARCHAR(4)
--SCORE INT
--ขอ้กา หนดคุณสมบตัิของขอ้มูลมีดงัน้ี
---ID และ SUB_ID เป็ น PIMARY KEY
---SCORE กา หนดใหม้ีค่าอยรู่ ะหวา่ ง 0-100และใหก้า หนดค่าเริ่มตน้ (default) เป็ น 0
---ID เป็ น FOREIGN KEY ของตาราง STUDENT ถ้ามีการลบข้อมูลในตาราง STUDENT ให้ท าการลบข้อมูลออกจากตาราง
--LEARNING
---SUB_ID เป็ น FOREIGN KEY ของตาราง SUBJECT ห้ามมีการลบข้อมูลในตารางSUBJECT ถา้มีนกัศึกษาลงทะเบียนเรียนอยู่

CREATE TABLE LEARNING
( 
	ID		VARCHAR(4)	    FOREIGN KEY(ID) REFERENCES STUDENT(ID),
	SUB_ID	VARCHAR(4)		FOREIGN KEY(SUB_ID) REFERENCES SUBJECTS(SUB_ID),	
	SCORE	INT				CHECK (SCORE >=0 AND SCORE <=100)		 DEFAULT '0'
);

--4.ใหน้กัศึกษาทา การเพิ่มขอ้มูลลงในตารางSUBJECT ดงัน้ี
--S001 JAVA
--S002 DATABASE
--S003 OS
--S004 NETWORK
--S005 PROJECT
--S006 PROJECT

INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S001','JAVA');
INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S002','DATABASE');
INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S003','OS');
INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S004','NETWORK');
INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S005','PROJECT');
INSERT INTO SUBJECTS(SUB_ID,SUB_NAME)
VALUES('S006','PROJECT');
SELECT * FROM SUBJECTS

--5.ใหน้กัศึกษาทา การเพิ่มขอ้มูลลงในตารางSTUDENT ดงัน้ี
--P001 ADAMS M
--P002 JOHN M
--P003 SMITH M
--P004 BLAKE M
--P005 JONES F
--P006 ALLEN F
--P007 MARTIN X
--P008 TURNER

INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P001','ADAMS','M');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P002','JOHN','M');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P003','SMITH','M');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P004','BLAKE','M');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P005','JONES','F');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P006','ALLEN','F');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P007','MARTIN','X');
INSERT INTO STUDENT(ID,NAME,GENDER)
VALUES('P008','TURNER','');
SELECT * FROM STUDENT

--6.ใหเ้พิ่มขอ้มูลการลงทะเบียนเรียนในตาราง LEARNING
--P001 S001 70
--P001 S002 50
--P001 S003
--P002 S001 65
--P002 S003 70
--P003 S005 80
--P004 S002 45
--P004 S002 50
--P004 S003 -10
--P004 S004 150

INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P001','S001','70');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P001','S002','50');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P001','S003','');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P002','S001','65');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P002','S003','70');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P003','S005','80');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P004','S002','45');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P004','S002','50');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P004','S003','-10');
INSERT INTO LEARNING(ID,SUB_ID,SCORE)
VALUES('P004','S004','150');
SELECT * FROM LEARNING

--7.ให้ลบข้อมูลนักศึกษาที่มีรหัส P002จากตารางนักศึกษา
DELETE FROM LEARNING WHERE ID = 'P002';
DELETE FROM STUDENT WHERE ID = 'P002';
--8.ให้แสดงข้อมูลนักศึกษาและข้อมูลการลงทะเบียนหลังจากท าข้อ 7
SELECT * FROM STUDENT
--9.ให้ลบข้อมูลรายวิชาที่มีรหัส S001จากตารางรายวิชา
DELETE FROM SUBJECTS WHERE SUB_ID = 'S001';
--10.ให้แสดงข้อมูลตารางรายวิชาและตารางลงทะเบียนหลังจากท าข้อ 9
SELECT * FROM SUBJECTS
